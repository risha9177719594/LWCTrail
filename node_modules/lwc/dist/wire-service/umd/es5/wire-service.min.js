!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).WireService={})}(this,(function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,n)};var n=function(e){this.type="ValueChangedEvent",this.value=e};Symbol("x").toString();var r=Object.freeze,i=Object.defineProperty,o=Object.isExtensible;var c=Array.prototype,a=c.forEach,s=c.splice,u=c.indexOf;function f(e,t){var n=u.call(e,t);n>-1&&s.call(e,n,1)}var l=function(){function e(e){var t=this;this.connecting=[],this.disconnecting=[],this.configuring=[],this.isFirstUpdate=!0,this.callback=e,this.wiredElementHost=e.$$DeprecatedWiredElementHostKey$$,this.eventTarget={addEventListener:function(e,n){switch(e){case"connect":t.connecting.push(n);break;case"disconnect":t.disconnecting.push(n);break;case"config":t.configuring.push(n),void 0!==t.currentConfig&&n.call(void 0,t.currentConfig);break;default:throw new Error("Invalid event type "+e+".")}},removeEventListener:function(e,n){switch(e){case"connect":f(t.connecting,n);break;case"disconnect":f(t.disconnecting,n);break;case"config":f(t.configuring,n);break;default:throw new Error("Invalid event type "+e+".")}},dispatchEvent:function(e){if(!(e instanceof n)){if("wirecontextevent"===e.type)return t.wiredElementHost.dispatchEvent(e);throw new Error("Invalid event type "+e.type+".")}var r=e.value;return t.callback(r),!1}}}return e.prototype.update=function(e){(!this.isFirstUpdate||(this.isFirstUpdate=!1,function(e){return 0===Object.keys(e).length}(e)||function(e){return Object.keys(e).some((function(t){return!(void 0===e[t])}))}(e)))&&(this.currentConfig=e,a.call(this.configuring,(function(t){t.call(void 0,e)})))},e.prototype.connect=function(){a.call(this.connecting,(function(e){return e.call(void 0)}))},e.prototype.disconnect=function(){a.call(this.disconnecting,(function(e){return e.call(void 0)}))},e}();e.ValueChangedEvent=n,e.WireAdapter=l,e.register=function(e,n){if(null==e||!o(e))throw new TypeError("adapter id must be extensible");if("function"!=typeof n)throw new TypeError("adapter factory must be a callable");if("adapter"in e)throw new TypeError("adapter id is already associated to an adapter factory");var c=function(e){function r(t){var r=e.call(this,t)||this;return n(r.eventTarget),r}return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(r,e),r}(l);r(c),r(c.prototype),i(e,"adapter",{writable:!1,configurable:!1,value:c})},e.registerWireService=function(){},Object.defineProperty(e,"__esModule",{value:!0})}));
